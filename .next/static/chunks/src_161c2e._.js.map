{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 7, "column": 0}, "map": {"version":3,"sources":["file:///Users/relucky/Desktop/programming/react/aitu-net-frontend/src/lib/api.ts"],"sourcesContent":["import axios, {AxiosError, AxiosResponse} from 'axios';\nimport {User} from \"@/models/user\";\nimport {ChatMessage} from \"@/models/chatMessage\";\nimport {ProfileUpdate} from \"@/models/ProfileUpdate\";\n\nconst API_URL = 'http://localhost:8080/api/v1';\n\nconst apiClient = axios.create({\n    baseURL: API_URL,\n    withCredentials: true,\n    headers: {\n        'Content-Type': 'application/json',\n    },\n});\n\napiClient.interceptors.response.use(\n    (response) => response,\n    (error: AxiosError) => {\n        if (\n            error.response?.status &&\n            error.response?.status >= 400 &&\n            error.response?.status < 500\n        ) {\n            return Promise.reject(error);\n        }\n        console.error('Unexpected API error:', error);\n        return Promise.reject(error);\n    }\n);\n\nasync function request<T>(endpoint: string, options: any = {}): Promise<AxiosResponse<T>> {\n    return await apiClient.request({\n        url: endpoint,\n        ...options,\n    });\n}\n\nexport const api = {\n    register: (userData: {\n        username: string;\n        email: string;\n        password: string;\n    }) =>\n        request('/auth/register', {\n            method: 'POST',\n            data: userData,\n        }),\n\n    login: async (userData: { email: string; password: string }) => {\n        return request('/auth/login', {\n            method: 'POST',\n            data: userData,\n        });\n    },\n\n    updateUser: async (profileUpdate: ProfileUpdate) => {\n        return request('/users', {\n            method: 'PATCH',\n            data: profileUpdate,\n        })\n    },\n    deleteProfilePhoto: async () => {\n        return request('/users/profile/photo', {\n            method: 'DELETE',\n        })\n    },\n\n    uploadProfilePhoto: async (file: File) => {\n        const formData = new FormData();\n        formData.append('file', file);\n        return request('/users/profile/photo', {\n            method: 'PATCH',\n            data: formData,\n            headers: {\n                'Content-Type': 'multipart/form-data',\n            }\n        })\n    },\n\n    getProfilePhoto: async (id: string) => {\n        return request(`/users/profile/photo/${id}`, {\n            method: 'GET',\n        });\n    },\n\n    getUser: async (): Promise<AxiosResponse<User>> =>\n        await request<User>('/auth/me'),\n\n    logout: async () =>\n        await request('/auth/logout', {\n            method: 'POST',\n        }),\n\n    fetchChatRooms: async (email: string): Promise<ChatRoom[]> => {\n        return (await request<ChatRoom[]>(`/chats/rooms/${email}`)).data;\n    },\n\n    fetchOnlineUsers: async (): Promise<User[]> => {\n        return (await request<User[]>('/chats/users/online')).data;\n    },\n\n    fetchChatRoomMessages: async (sender: string, recipient: string) => {\n        return (await request<ChatMessage[]>(`/chats/messages/${sender}/${recipient}`)).data\n    },\n\n    searchUsers: async (query: string) => {\n        return (await request<User[]>(`/chats/users/search?query=${query}`)).data\n    }\n};\n"],"names":[],"mappings":";;;AAAA;;AAKA,MAAM,UAAU;AAEhB,MAAM,YAAY,wIAAA,CAAA,UAAK,CAAC,MAAM,CAAC;IAC3B,SAAS;IACT,iBAAiB;IACjB,SAAS;QACL,gBAAgB;IACpB;AACJ;AAEA,UAAU,YAAY,CAAC,QAAQ,CAAC,GAAG,CAC/B,CAAC,WAAa,UACd,CAAC;IACG,IACI,MAAM,QAAQ,EAAE,UAChB,MAAM,QAAQ,EAAE,UAAU,OAC1B,MAAM,QAAQ,EAAE,SAAS,KAC3B;QACE,OAAO,QAAQ,MAAM,CAAC;IAC1B;IACA,QAAQ,KAAK,CAAC,yBAAyB;IACvC,OAAO,QAAQ,MAAM,CAAC;AAC1B;AAGJ,eAAe,QAAW,QAAgB,EAAE,UAAe,CAAC,CAAC;IACzD,OAAO,MAAM,UAAU,OAAO,CAAC;QAC3B,KAAK;QACL,GAAG,OAAO;IACd;AACJ;AAEO,MAAM,MAAM;IACf,UAAU,CAAC,WAKP,QAAQ,kBAAkB;YACtB,QAAQ;YACR,MAAM;QACV;IAEJ,OAAO,OAAO;QACV,OAAO,QAAQ,eAAe;YAC1B,QAAQ;YACR,MAAM;QACV;IACJ;IAEA,YAAY,OAAO;QACf,OAAO,QAAQ,UAAU;YACrB,QAAQ;YACR,MAAM;QACV;IACJ;IACA,oBAAoB;QAChB,OAAO,QAAQ,wBAAwB;YACnC,QAAQ;QACZ;IACJ;IAEA,oBAAoB,OAAO;QACvB,MAAM,WAAW,IAAI;QACrB,SAAS,MAAM,CAAC,QAAQ;QACxB,OAAO,QAAQ,wBAAwB;YACnC,QAAQ;YACR,MAAM;YACN,SAAS;gBACL,gBAAgB;YACpB;QACJ;IACJ;IAEA,iBAAiB,OAAO;QACpB,OAAO,QAAQ,CAAC,qBAAqB,EAAE,IAAI,EAAE;YACzC,QAAQ;QACZ;IACJ;IAEA,SAAS,UACL,MAAM,QAAc;IAExB,QAAQ,UACJ,MAAM,QAAQ,gBAAgB;YAC1B,QAAQ;QACZ;IAEJ,gBAAgB,OAAO;QACnB,OAAO,CAAC,MAAM,QAAoB,CAAC,aAAa,EAAE,OAAO,CAAC,EAAE,IAAI;IACpE;IAEA,kBAAkB;QACd,OAAO,CAAC,MAAM,QAAgB,sBAAsB,EAAE,IAAI;IAC9D;IAEA,uBAAuB,OAAO,QAAgB;QAC1C,OAAO,CAAC,MAAM,QAAuB,CAAC,gBAAgB,EAAE,OAAO,CAAC,EAAE,WAAW,CAAC,EAAE,IAAI;IACxF;IAEA,aAAa,OAAO;QAChB,OAAO,CAAC,MAAM,QAAgB,CAAC,0BAA0B,EAAE,OAAO,CAAC,EAAE,IAAI;IAC7E;AACJ"}},
    {"offset": {"line": 91, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 97, "column": 0}, "map": {"version":3,"sources":["file:///Users/relucky/Desktop/programming/react/aitu-net-frontend/src/app/Logout.tsx"],"sourcesContent":["'use client';\n\nimport { useRouter } from 'next/navigation';\nimport { api } from '@/lib/api';\n\nexport const LogoutButton = () => {\n    const router = useRouter();\n\n    const handleLogout = async (event: React.MouseEvent<HTMLButtonElement>) => {\n        event.preventDefault();\n        await api.logout();\n\n        router.refresh();\n        router.replace('/auth/login');\n    };\n\n    return (\n        <button\n            type=\"button\"\n            onClick={handleLogout}\n            className=\"bg-red-500 text-white px-4 py-2 rounded\"\n        >\n            Выйти\n        </button>\n    );\n};\n"],"names":[],"mappings":";;;;AAEA;AACA;;;AAHA;;;AAKO,MAAM,eAAe;;IACxB,MAAM,SAAS,CAAA,GAAA,qIAAA,CAAA,YAAS,AAAD;IAEvB,MAAM,eAAe,OAAO;QACxB,MAAM,cAAc;QACpB,MAAM,oHAAA,CAAA,MAAG,CAAC,MAAM;QAEhB,OAAO,OAAO;QACd,OAAO,OAAO,CAAC;IACnB;IAEA,qBACI,6LAAC;QACG,MAAK;QACL,SAAS;QACT,WAAU;kBACb;;;;;;AAIT;GApBa;;QACM,qIAAA,CAAA,YAAS;;;KADf"}},
    {"offset": {"line": 139, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 145, "column": 0}, "map": {"version":3,"sources":["file:///Users/relucky/Desktop/programming/react/aitu-net-frontend/src/context/AuthProvider.tsx"],"sourcesContent":["'use client';\n\nimport {api} from '@/lib/api';\nimport {User} from '@/models/user';\nimport {\n    createContext,\n    ReactNode,\n    useContext,\n    useEffect,\n    useState,\n} from 'react';\n\ninterface AuthContextType {\n    user: User | null;\n    loadUser: () => void;\n    loginUser: (userData: { email: string; password: string }) => Promise<void>;\n    logout: () => void;\n    register: (userData: {\n        email: string;\n        username: string;\n        password: string;\n    }) => void;\n}\n\ninterface AuthProviderProps {\n    children: ReactNode;\n}\n\nexport const AuthContext = createContext<AuthContextType | undefined>(\n    undefined\n);\n\nexport function AuthProvider({children}: AuthProviderProps) {\n    const [user, setUser] = useState<User | null>(null);\n\n    useEffect(() => {\n        loadUser();\n    }, []);\n\n    const loginUser = async (userData: { email: string; password: string }) => {\n        try {\n            const response = await api.login(userData);\n            if (response.status === 200) {\n                console.log('Successfully logged in')\n            }\n        } catch (error) {\n            console.error('Login failed:', error);\n        }\n    };\n\n    const logout = async () => {\n        try {\n            await api.logout();\n            setUser(null);\n            console.log('Logout successful');\n        } catch (error: any) {\n            console.error(\n                'Logout failed:',\n                error.response?.data?.message || error.message\n            );\n        }\n    };\n\n    const register = async (userData: {\n        email: string;\n        username: string;\n        password: string;\n    }) => {\n        try {\n            const response = await api.register(userData);\n            console.log('Registration successful:', response.data);\n        } catch (error: any) {\n            console.error(\n                'Registration failed:',\n                error.response?.data?.message || error.message\n            );\n        }\n    };\n\n    const loadUser = async () => {\n        try {\n            const response = await api.getUser();\n            if (response.status === 200) {\n                setUser(response.data);\n            } else {\n                setUser(null)\n            }\n        } catch (err) {\n            console.error('Failed to fetch users:', err);\n            setUser(null);\n        }\n    }\n\n    return (\n        <AuthContext.Provider value={{user, loginUser, logout, register, loadUser}}>\n            {children}\n        </AuthContext.Provider>\n    );\n}\n\nexport function useAuth() {\n    const context = useContext(AuthContext);\n    if (!context) {\n        throw new Error('useAuth must be used within an AuthProvider');\n    }\n\n    return context;\n}\n"],"names":[],"mappings":";;;;;;AAEA;AAEA;;;AAJA;;;AA4BO,MAAM,4BAAc,CAAA,GAAA,6JAAA,CAAA,gBAAa,AAAD,EACnC;AAGG,SAAS,aAAa,EAAC,QAAQ,EAAoB;;IACtD,MAAM,CAAC,MAAM,QAAQ,GAAG,CAAA,GAAA,6JAAA,CAAA,WAAQ,AAAD,EAAe;IAE9C,CAAA,GAAA,6JAAA,CAAA,YAAS,AAAD;kCAAE;YACN;QACJ;iCAAG,EAAE;IAEL,MAAM,YAAY,OAAO;QACrB,IAAI;YACA,MAAM,WAAW,MAAM,oHAAA,CAAA,MAAG,CAAC,KAAK,CAAC;YACjC,IAAI,SAAS,MAAM,KAAK,KAAK;gBACzB,QAAQ,GAAG,CAAC;YAChB;QACJ,EAAE,OAAO,OAAO;YACZ,QAAQ,KAAK,CAAC,iBAAiB;QACnC;IACJ;IAEA,MAAM,SAAS;QACX,IAAI;YACA,MAAM,oHAAA,CAAA,MAAG,CAAC,MAAM;YAChB,QAAQ;YACR,QAAQ,GAAG,CAAC;QAChB,EAAE,OAAO,OAAY;YACjB,QAAQ,KAAK,CACT,kBACA,MAAM,QAAQ,EAAE,MAAM,WAAW,MAAM,OAAO;QAEtD;IACJ;IAEA,MAAM,WAAW,OAAO;QAKpB,IAAI;YACA,MAAM,WAAW,MAAM,oHAAA,CAAA,MAAG,CAAC,QAAQ,CAAC;YACpC,QAAQ,GAAG,CAAC,4BAA4B,SAAS,IAAI;QACzD,EAAE,OAAO,OAAY;YACjB,QAAQ,KAAK,CACT,wBACA,MAAM,QAAQ,EAAE,MAAM,WAAW,MAAM,OAAO;QAEtD;IACJ;IAEA,MAAM,WAAW;QACb,IAAI;YACA,MAAM,WAAW,MAAM,oHAAA,CAAA,MAAG,CAAC,OAAO;YAClC,IAAI,SAAS,MAAM,KAAK,KAAK;gBACzB,QAAQ,SAAS,IAAI;YACzB,OAAO;gBACH,QAAQ;YACZ;QACJ,EAAE,OAAO,KAAK;YACV,QAAQ,KAAK,CAAC,0BAA0B;YACxC,QAAQ;QACZ;IACJ;IAEA,qBACI,6LAAC,YAAY,QAAQ;QAAC,OAAO;YAAC;YAAM;YAAW;YAAQ;YAAU;QAAQ;kBACpE;;;;;;AAGb;GAlEgB;KAAA;AAoET,SAAS;;IACZ,MAAM,UAAU,CAAA,GAAA,6JAAA,CAAA,aAAU,AAAD,EAAE;IAC3B,IAAI,CAAC,SAAS;QACV,MAAM,IAAI,MAAM;IACpB;IAEA,OAAO;AACX;IAPgB"}},
    {"offset": {"line": 238, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 244, "column": 0}, "map": {"version":3,"sources":["file:///Users/relucky/Desktop/programming/react/aitu-net-frontend/src/components/SearchBar.tsx"],"sourcesContent":["'use client'\n\nimport React, {useState} from \"react\";\nimport {useRouter} from \"next/navigation\";\n\nexport default function SearchBar() {\n    const [query, setQuery] = useState('')\n    const router = useRouter()\n\n    const handleSearchChange = (event: React.ChangeEvent<HTMLInputElement>) => {\n        setQuery(event.target.value);\n    };\n\n    const handleSearchSubmit = (event: React.FormEvent) => {\n        event.preventDefault()\n\n        if (query.trim()) {\n            router.push(`/search?query=${query}`)\n        }\n    }\n\n    return (\n        <form onSubmit={handleSearchSubmit} className=\"flex items-center bg-gray-700 rounded-lg overflow-hidden\">\n            <input\n                type=\"text\"\n                placeholder=\"🔍 Search users\"\n                value={query}\n                onChange={handleSearchChange}\n                className=\"px-4 py-2 w-64 bg-gray-700 text-white focus:outline-none focus:ring-2 focus:ring-blue-500\"\n            />\n            <button\n                type=\"submit\"\n                className=\"px-4 py-2 bg-blue-600 hover:bg-blue-500 text-white transition\"\n            >\n                Search\n            </button>\n        </form>\n    )\n}"],"names":[],"mappings":";;;;AAEA;AACA;;;AAHA;;;AAKe,SAAS;;IACpB,MAAM,CAAC,OAAO,SAAS,GAAG,CAAA,GAAA,6JAAA,CAAA,WAAQ,AAAD,EAAE;IACnC,MAAM,SAAS,CAAA,GAAA,qIAAA,CAAA,YAAS,AAAD;IAEvB,MAAM,qBAAqB,CAAC;QACxB,SAAS,MAAM,MAAM,CAAC,KAAK;IAC/B;IAEA,MAAM,qBAAqB,CAAC;QACxB,MAAM,cAAc;QAEpB,IAAI,MAAM,IAAI,IAAI;YACd,OAAO,IAAI,CAAC,CAAC,cAAc,EAAE,OAAO;QACxC;IACJ;IAEA,qBACI,6LAAC;QAAK,UAAU;QAAoB,WAAU;;0BAC1C,6LAAC;gBACG,MAAK;gBACL,aAAY;gBACZ,OAAO;gBACP,UAAU;gBACV,WAAU;;;;;;0BAEd,6LAAC;gBACG,MAAK;gBACL,WAAU;0BACb;;;;;;;;;;;;AAKb;GAjCwB;;QAEL,qIAAA,CAAA,YAAS;;;KAFJ"}},
    {"offset": {"line": 310, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 316, "column": 0}, "map": {"version":3,"sources":["file:///Users/relucky/Desktop/programming/react/aitu-net-frontend/src/components/ClientLayout.tsx"],"sourcesContent":["'use client';\n\nimport {LogoutButton} from '@/app/Logout';\nimport {useAuth} from '@/context/AuthProvider';\nimport Link from 'next/link';\nimport React, {useState} from \"react\";\nimport SearchBar from \"@/components/SearchBar\";\nimport {usePathname} from \"next/navigation\";\nimport FriendLayout from \"@/components/friends/FriendLayout\";\n\nexport default function ClientLayout({\n                                         children,\n                                     }: {\n    children: React.ReactNode;\n}) {\n    const {user} = useAuth();\n    const pathname = usePathname();\n    const [showFriendsMenu, setShowFriendsMenu] = useState(false);\n\n    return (\n        <div className=\"flex\">\n            {/* Sidebar */}\n            <aside className=\"w-64 h-screen bg-gray-800 text-white p-4 shadow-lg fixed flex flex-col space-y-4\">\n                <Link href=\"/\" className=\"hover:text-blue-400 transition\">🏠 Main</Link>\n                {!user && <Link href=\"/auth/login\" className=\"hover:text-blue-400 transition\">🔐 Login</Link>}\n                {!user && <Link href=\"/auth/register\" className=\"hover:text-blue-400 transition\">📝 Registration</Link>}\n                <Link href=\"/users/profile\" className=\"hover:text-blue-400 transition\">📌 Profile</Link>\n                {user && <Link href=\"/chat\" className=\"hover:text-blue-400 transition\">💬 Chat</Link>}\n                {\n                    user &&\n                    <button\n                        onClick={() => setShowFriendsMenu((prev) => !prev)}\n                        className=\"hover:text-blue-400 transition flex items-center\"\n                    >\n                        🤼‍ Friends\n                    </button>\n                }\n                <SearchBar/>\n                <LogoutButton/>\n            </aside>\n\n            {/* Main Content */}\n            <main className=\"flex-1 p-6 ml-64\">{children}</main>\n        </div>\n    );\n}\n"],"names":[],"mappings":";;;;AAEA;AACA;AACA;AACA;AACA;AACA;;;AAPA;;;;;;;AAUe,SAAS,aAAa,EACI,QAAQ,EAGhD;;IACG,MAAM,EAAC,IAAI,EAAC,GAAG,CAAA,GAAA,kIAAA,CAAA,UAAO,AAAD;IACrB,MAAM,WAAW,CAAA,GAAA,qIAAA,CAAA,cAAW,AAAD;IAC3B,MAAM,CAAC,iBAAiB,mBAAmB,GAAG,CAAA,GAAA,6JAAA,CAAA,WAAQ,AAAD,EAAE;IAEvD,qBACI,6LAAC;QAAI,WAAU;;0BAEX,6LAAC;gBAAM,WAAU;;kCACb,6LAAC,+JAAA,CAAA,UAAI;wBAAC,MAAK;wBAAI,WAAU;kCAAiC;;;;;;oBACzD,CAAC,sBAAQ,6LAAC,+JAAA,CAAA,UAAI;wBAAC,MAAK;wBAAc,WAAU;kCAAiC;;;;;;oBAC7E,CAAC,sBAAQ,6LAAC,+JAAA,CAAA,UAAI;wBAAC,MAAK;wBAAiB,WAAU;kCAAiC;;;;;;kCACjF,6LAAC,+JAAA,CAAA,UAAI;wBAAC,MAAK;wBAAiB,WAAU;kCAAiC;;;;;;oBACtE,sBAAQ,6LAAC,+JAAA,CAAA,UAAI;wBAAC,MAAK;wBAAQ,WAAU;kCAAiC;;;;;;oBAEnE,sBACA,6LAAC;wBACG,SAAS,IAAM,mBAAmB,CAAC,OAAS,CAAC;wBAC7C,WAAU;kCACb;;;;;;kCAIL,6LAAC,kIAAA,CAAA,UAAS;;;;;kCACV,6LAAC,wHAAA,CAAA,eAAY;;;;;;;;;;;0BAIjB,6LAAC;gBAAK,WAAU;0BAAoB;;;;;;;;;;;;AAGhD;GAnCwB;;QAKL,kIAAA,CAAA,UAAO;QACL,qIAAA,CAAA,cAAW;;;KANR"}},
    {"offset": {"line": 443, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}}]
}